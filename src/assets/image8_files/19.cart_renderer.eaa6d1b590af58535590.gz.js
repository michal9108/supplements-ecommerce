(window.monster_upsells=window.monster_upsells||[]).push([[19],{296:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return j}));var o=a(0),n=a.n(o),r=a(4),l=a(6),i=a(1),c=a(25),u=a(3),s=a(2),d=a(128),f=a(127),g=a(297),p=a(13),m=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a&&console.log("total: ".concat(e,", goal: ").concat(t,", unlocked: ").concat(e>=t)),e>=t},C=function(t){var e=t.campaign_id,a=t.goals,o=t.show_badges,n=t.shopify_cart_items,r=t.original,c=t.subtotal,u=t.autoDiscountGifts,s=t.bundlesDiscounts,d=t.discountCode,f=t.byQuantity,g=t.contextCache,C=t.setShowConfetti,v=Object(l.a)(a).sort(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DESC",e="DESC"===t.toLocaleUpperCase();return e?function(t,e){return e.goal-t.goal}:function(t,e){return t.goal-e.goal}}("ASC")).map((function(t){var e=t.goal,a=t.specific_goals,o=Object(p.getGoal)({oldGoal:e,specific_goals:a,byQuantity:f});return Object(i.a)(Object(i.a)({},t),{},{goal:o})})),h=function(t){return f?t:parseInt(100*t)},_=function(t){var e=s+((null==d?void 0:d.value)||0);return f?b:"free_shipping"===t?c:"manual"===t?r+u-e:r-e},b=n.filter((function(t){var e=t.product_type;return"free_gift"!==(null==e?void 0:e.toLowerCase())})).reduce((function(t,e){return t+e.quantity}),0);return v.map((function(t,a){var n,r,l=t.goal,i=t.reward_type,c=t.confetti,u=t.confetti_length,s=_(i),d=m(h(l),s),f=g?!1===(null==g||null===(n=g.goals[a])||void 0===n?void 0:n.unlocked):null,p=o?function(t,e){return t?100:{1:68,2:45,3:10,4:5}[e]}(d,v.length):Math.min(100,Number((s/h(l)*100).toFixed(2))),b=!!g&&(null==g||null===(r=g.goals[a])||void 0===r?void 0:r.value)>p,w=a>0?v[a-1]:{};return c&&!b&&d&&f&&C(u),{campaign_id:e,key:"atu_goal_"+a,textKey:"atu_goal_text_"+a,labelKey:"atu_goal_label_"+a,goalObject:t,value:p,previousIsUnlocked:(null==w?void 0:w.goal)||0===(null==w?void 0:w.goal)?m(h(w.goal),_(w.reward_type)):void 0,isFirst:0===a,isLast:a===v.length-1,unlocked:d}}))};var v=function(t){var e=t.campaign_id,a=t.goals,o=t.show_badges,n=t.shopify_cart_items,r=t.byQuantity,l=t.original,i=t.autoDiscountGifts,c=t.subtotal,u=t.bundlesDiscounts,s=t.discountCode,d=t.contextCache,f=t.setShowConfetti;return Object(g.a)({id:"header-machine",context:{goals:C({campaign_id:e,goals:a,show_badges:o,shopify_cart_items:n,original:l,autoDiscountGifts:i,subtotal:c,byQuantity:r,bundlesDiscounts:u,discountCode:s,contextCache:d,setShowConfetti:f})}})},h=a(295),_=a(41),b=a(40);var w=a(143),y=a(7),x=a.n(y);function O(t){var e=t.goal,a=Object(s.useContext)(d.CartContext),o=a.cart_settings.money_format,n=a.Utils,r=e.badge,l=e.reward_type;if("discount"===l&&2===(null==r?void 0:r.type)){var i=e.discount,c=i.type,u=i.reward,g="percentage"===c?"".concat(u,"%"):n.formatMoney(100*u,o);return s.default.createElement(s.Fragment,null,s.default.createElement("span",null,g),s.default.createElement("span",null,"Off"))}if("manual"===l)switch(null==r?void 0:r.type){case 2:return s.default.createElement(s.Fragment,null,s.default.createElement("span",{className:Object(f.a)("text-9px")},"Express"),s.default.createElement("span",{className:Object(f.a)("text-9px"),style:{marginBottom:"2px"}},"shipping"),s.default.createElement("svg",{width:"22",height:"14.67",viewBox:"0 0 33 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M3.82105 13.0625L2.77895 11H10.0737L9.24 8.9375H2.43158L1.38947 6.875H12.2274L11.3937 4.8125H1.19495L0 2.75H5.21053C5.21053 2.02065 5.50331 1.32118 6.02446 0.805456C6.54561 0.289731 7.25245 0 7.98947 0H24.6632V5.5H28.8316L33 11V17.875H30.2211C30.2211 18.969 29.7819 20.0182 29.0002 20.7918C28.2184 21.5654 27.1582 22 26.0526 22C24.9471 22 23.8868 21.5654 23.1051 20.7918C22.3234 20.0182 21.8842 18.969 21.8842 17.875H16.3263C16.3263 18.969 15.8871 20.0182 15.1054 20.7918C14.3237 21.5654 13.2634 22 12.1579 22C11.0524 22 9.99211 21.5654 9.21038 20.7918C8.42865 20.0182 7.98947 18.969 7.98947 17.875H5.21053V13.0625H3.82105ZM26.0526 19.9375C26.6054 19.9375 27.1355 19.7202 27.5264 19.3334C27.9173 18.9466 28.1368 18.422 28.1368 17.875C28.1368 17.328 27.9173 16.8034 27.5264 16.4166C27.1355 16.0298 26.6054 15.8125 26.0526 15.8125C25.4999 15.8125 24.9697 16.0298 24.5789 16.4166C24.188 16.8034 23.9684 17.328 23.9684 17.875C23.9684 18.422 24.188 18.9466 24.5789 19.3334C24.9697 19.7202 25.4999 19.9375 26.0526 19.9375ZM28.1368 7.5625H24.6632V11H30.8602L28.1368 7.5625ZM12.1579 19.9375C12.7107 19.9375 13.2408 19.7202 13.6317 19.3334C14.0225 18.9466 14.2421 18.422 14.2421 17.875C14.2421 17.328 14.0225 16.8034 13.6317 16.4166C13.2408 16.0298 12.7107 15.8125 12.1579 15.8125C11.6051 15.8125 11.075 16.0298 10.6841 16.4166C10.2933 16.8034 10.0737 17.328 10.0737 17.875C10.0737 18.422 10.2933 18.9466 10.6841 19.3334C11.075 19.7202 11.6051 19.9375 12.1579 19.9375Z",fill:"currentColor"})));case 3:return s.default.createElement("svg",{width:"33",height:"22",viewBox:"0 0 33 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M3.82105 13.0625L2.77895 11H10.0737L9.24 8.9375H2.43158L1.38947 6.875H12.2274L11.3937 4.8125H1.19495L0 2.75H5.21053C5.21053 2.02065 5.50331 1.32118 6.02446 0.805456C6.54561 0.289731 7.25245 0 7.98947 0H24.6632V5.5H28.8316L33 11V17.875H30.2211C30.2211 18.969 29.7819 20.0182 29.0002 20.7918C28.2184 21.5654 27.1582 22 26.0526 22C24.9471 22 23.8868 21.5654 23.1051 20.7918C22.3234 20.0182 21.8842 18.969 21.8842 17.875H16.3263C16.3263 18.969 15.8871 20.0182 15.1054 20.7918C14.3237 21.5654 13.2634 22 12.1579 22C11.0524 22 9.99211 21.5654 9.21038 20.7918C8.42865 20.0182 7.98947 18.969 7.98947 17.875H5.21053V13.0625H3.82105ZM26.0526 19.9375C26.6054 19.9375 27.1355 19.7202 27.5264 19.3334C27.9173 18.9466 28.1368 18.422 28.1368 17.875C28.1368 17.328 27.9173 16.8034 27.5264 16.4166C27.1355 16.0298 26.6054 15.8125 26.0526 15.8125C25.4999 15.8125 24.9697 16.0298 24.5789 16.4166C24.188 16.8034 23.9684 17.328 23.9684 17.875C23.9684 18.422 24.188 18.9466 24.5789 19.3334C24.9697 19.7202 25.4999 19.9375 26.0526 19.9375ZM28.1368 7.5625H24.6632V11H30.8602L28.1368 7.5625ZM12.1579 19.9375C12.7107 19.9375 13.2408 19.7202 13.6317 19.3334C14.0225 18.9466 14.2421 18.422 14.2421 17.875C14.2421 17.328 14.0225 16.8034 13.6317 16.4166C13.2408 16.0298 12.7107 15.8125 12.1579 15.8125C11.6051 15.8125 11.075 16.0298 10.6841 16.4166C10.2933 16.8034 10.0737 17.328 10.0737 17.875C10.0737 18.422 10.2933 18.9466 10.6841 19.3334C11.075 19.7202 11.6051 19.9375 12.1579 19.9375Z",fill:"currentColor"}))}else if("free_shipping"===l)switch(null==r?void 0:r.type){case 2:return s.default.createElement(s.Fragment,null,s.default.createElement("span",{className:Object(f.a)("text-9px")},"Free"),s.default.createElement("span",{className:Object(f.a)("text-9px"),style:{marginBottom:"2px"}},"shipping"),s.default.createElement("svg",{width:"22",height:"14.67",viewBox:"0 0 33 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M3.82105 13.0625L2.77895 11H10.0737L9.24 8.9375H2.43158L1.38947 6.875H12.2274L11.3937 4.8125H1.19495L0 2.75H5.21053C5.21053 2.02065 5.50331 1.32118 6.02446 0.805456C6.54561 0.289731 7.25245 0 7.98947 0H24.6632V5.5H28.8316L33 11V17.875H30.2211C30.2211 18.969 29.7819 20.0182 29.0002 20.7918C28.2184 21.5654 27.1582 22 26.0526 22C24.9471 22 23.8868 21.5654 23.1051 20.7918C22.3234 20.0182 21.8842 18.969 21.8842 17.875H16.3263C16.3263 18.969 15.8871 20.0182 15.1054 20.7918C14.3237 21.5654 13.2634 22 12.1579 22C11.0524 22 9.99211 21.5654 9.21038 20.7918C8.42865 20.0182 7.98947 18.969 7.98947 17.875H5.21053V13.0625H3.82105ZM26.0526 19.9375C26.6054 19.9375 27.1355 19.7202 27.5264 19.3334C27.9173 18.9466 28.1368 18.422 28.1368 17.875C28.1368 17.328 27.9173 16.8034 27.5264 16.4166C27.1355 16.0298 26.6054 15.8125 26.0526 15.8125C25.4999 15.8125 24.9697 16.0298 24.5789 16.4166C24.188 16.8034 23.9684 17.328 23.9684 17.875C23.9684 18.422 24.188 18.9466 24.5789 19.3334C24.9697 19.7202 25.4999 19.9375 26.0526 19.9375ZM28.1368 7.5625H24.6632V11H30.8602L28.1368 7.5625ZM12.1579 19.9375C12.7107 19.9375 13.2408 19.7202 13.6317 19.3334C14.0225 18.9466 14.2421 18.422 14.2421 17.875C14.2421 17.328 14.0225 16.8034 13.6317 16.4166C13.2408 16.0298 12.7107 15.8125 12.1579 15.8125C11.6051 15.8125 11.075 16.0298 10.6841 16.4166C10.2933 16.8034 10.0737 17.328 10.0737 17.875C10.0737 18.422 10.2933 18.9466 10.6841 19.3334C11.075 19.7202 11.6051 19.9375 12.1579 19.9375Z",fill:"currentColor"})));case 3:return s.default.createElement("svg",{width:"33",height:"22",viewBox:"0 0 33 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M3.82105 13.0625L2.77895 11H10.0737L9.24 8.9375H2.43158L1.38947 6.875H12.2274L11.3937 4.8125H1.19495L0 2.75H5.21053C5.21053 2.02065 5.50331 1.32118 6.02446 0.805456C6.54561 0.289731 7.25245 0 7.98947 0H24.6632V5.5H28.8316L33 11V17.875H30.2211C30.2211 18.969 29.7819 20.0182 29.0002 20.7918C28.2184 21.5654 27.1582 22 26.0526 22C24.9471 22 23.8868 21.5654 23.1051 20.7918C22.3234 20.0182 21.8842 18.969 21.8842 17.875H16.3263C16.3263 18.969 15.8871 20.0182 15.1054 20.7918C14.3237 21.5654 13.2634 22 12.1579 22C11.0524 22 9.99211 21.5654 9.21038 20.7918C8.42865 20.0182 7.98947 18.969 7.98947 17.875H5.21053V13.0625H3.82105ZM26.0526 19.9375C26.6054 19.9375 27.1355 19.7202 27.5264 19.3334C27.9173 18.9466 28.1368 18.422 28.1368 17.875C28.1368 17.328 27.9173 16.8034 27.5264 16.4166C27.1355 16.0298 26.6054 15.8125 26.0526 15.8125C25.4999 15.8125 24.9697 16.0298 24.5789 16.4166C24.188 16.8034 23.9684 17.328 23.9684 17.875C23.9684 18.422 24.188 18.9466 24.5789 19.3334C24.9697 19.7202 25.4999 19.9375 26.0526 19.9375ZM28.1368 7.5625H24.6632V11H30.8602L28.1368 7.5625ZM12.1579 19.9375C12.7107 19.9375 13.2408 19.7202 13.6317 19.3334C14.0225 18.9466 14.2421 18.422 14.2421 17.875C14.2421 17.328 14.0225 16.8034 13.6317 16.4166C13.2408 16.0298 12.7107 15.8125 12.1579 15.8125C11.6051 15.8125 11.075 16.0298 10.6841 16.4166C10.2933 16.8034 10.0737 17.328 10.0737 17.875C10.0737 18.422 10.2933 18.9466 10.6841 19.3334C11.075 19.7202 11.6051 19.9375 12.1579 19.9375Z",fill:"currentColor"}))}else if("gift"===l)switch(null==r?void 0:r.type){case 2:return s.default.createElement(s.Fragment,null,s.default.createElement("span",{className:Object(f.a)("text-11px")},"Free"),s.default.createElement("span",{className:Object(f.a)("text-11px")},"Gift"),s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:Object(f.a)("w-4 h-4")},s.default.createElement("path",{fillRule:"evenodd",d:"M14 6a2.5 2.5 0 00-4-3 2.5 2.5 0 00-4 3H3.25C2.56 6 2 6.56 2 7.25v.5C2 8.44 2.56 9 3.25 9h6V6h1.5v3h6C17.44 9 18 8.44 18 7.75v-.5C18 6.56 17.44 6 16.75 6H14zm-1-1.5a1 1 0 01-1 1h-1v-1a1 1 0 112 0zm-6 0a1 1 0 001 1h1v-1a1 1 0 00-2 0z",clipRule:"evenodd"}),s.default.createElement("path",{d:"M9.25 10.5H3v4.75A2.75 2.75 0 005.75 18h3.5v-7.5zM10.75 18v-7.5H17v4.75A2.75 2.75 0 0114.25 18h-3.5z"})));case 3:return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:Object(f.a)("w-6 h-6")},s.default.createElement("path",{d:"M9.375 3a1.875 1.875 0 000 3.75h1.875v4.5H3.375A1.875 1.875 0 011.5 9.375v-.75c0-1.036.84-1.875 1.875-1.875h3.193A3.375 3.375 0 0112 2.753a3.375 3.375 0 015.432 3.997h3.943c1.035 0 1.875.84 1.875 1.875v.75c0 1.036-.84 1.875-1.875 1.875H12.75v-4.5h1.875a1.875 1.875 0 10-1.875-1.875V6.75h-1.5V4.875C11.25 3.839 10.41 3 9.375 3zM11.25 12.75H3v6.75a2.25 2.25 0 002.25 2.25h6v-9zM12.75 12.75v9h6.75a2.25 2.25 0 002.25-2.25v-6.75h-9z"}))}return null}function j(t){var e=t.campaign_id,a=t.add_to_unlock,o=t.bundlesDiscounts,n=Object(s.useContext)(d.CartContext),r=n.cart_settings,l=r.theme,i=(l.primary,l.background,r.font.color,r.rtl),c=(r.money_format,n.campaigns),g=n.setShowConfetti,m=n.shopify_cart_items,C=n.Utils,y=(n.add_to_cart,n.update_cart_item,n.get_total),x=n.productNotAddedToCart,O=n.onlyOneItemAddedToCart,j=n.productAddedToCart,L=n.discountCode,E=n.setCartItems,M=n.AppLocalStorage,N=n.hasAutoDiscount,S=Object(_.a)(null),I=Object(u.a)(S,3),V=(I[0],I[1]),D=I[2],T=Object(b.a)("one_check_up_sell",null,!0)(c,m),F=Object(u.a)(T,2),Z=(F[0],F[1]),z=Object(w.b)(Z),U=m.filter((function(t){var e,a=z.find((function(e){var a=e.product;return t.product_id.toString()===(null==a?void 0:a.id)}));return a?a.include_in_atu:!["free_gift","singleton_gift"].includes(null==t||null===(e=t.product_type)||void 0===e?void 0:e.toLowerCase())})),B=y(null,U),G=B.original,q=B.subtotal,Q=B.autoDiscountGifts,J="quantity"===a.multi_goal_type,K=Object(s.useMemo)((function(){return v({campaign_id:e,goals:Object(p.FilterAtuGoals)(a.goals,!!(null==L?void 0:L.value)||N),show_badges:a.show_badges,setShowConfetti:g,shopify_cart_items:U,original:G,autoDiscountGifts:Q,subtotal:q,bundlesDiscounts:o,discountCode:L,byQuantity:J,contextCache:D.current})}),[m,a,o,D.current,N,L]),P=Object(h.a)(K),R=Object(u.a)(P,3),W=(R[0],R[1],R[2],K.context),X=W.goals.filter((function(t){t.goalObject.badge;return a.show_badges})).length>0;return Object(s.useEffect)((function(){var t=W.goals.filter((function(t){return"gift"===t.goalObject.reward_type}));t.length&&function(t){A.apply(this,arguments)}({giftGoals:t,AppLocalStorage:M,Utils:C,discountCode:L,productNotAddedToCart:x,onlyOneItemAddedToCart:O,productAddedToCart:j,setCartItems:E})}),[L,m]),Object(s.useEffect)((function(){if(JSON.stringify(W)!==JSON.stringify(D.current)){if(D.current){var t,e=null==W||null===(t=W.goals)||void 0===t?void 0:t.filter((function(t,e){var a,o,n;return t.goalObject.confetti&&!(null==D||null===(a=D.current)||void 0===a||null===(o=a.goals[e])||void 0===o||null===(n=o.goalObject)||void 0===n?void 0:n.confetti)}));e.length&&g(e[0].goalObject.confetti_length)}V(W)}}),[W]),s.default.createElement("div",{className:Object(f.a)("px-5 py-2 mb-px shadow atu-banner"),"data-offset":1,style:{background:a.progress_background?C.formatColor(a.progress_background):"inherit",paddingBottom:X?"30px":void 0}},s.default.createElement("div",{className:Object(f.a)("w-full"),style:{marginBottom:X?"25px":void 0}},W.goals.map((function(t,e){var n=t.textKey,r=t.goalObject,l=t.unlocked,i=t.previousIsUnlocked,c=t.isFirst,u=t.isLast;return s.default.createElement(k,{key:n,unlocked:l,bundlesDiscounts:o,currentGoal:r,add_to_unlock:a,filteredItems:U,otherUnlockedDiscounts:W.goals.filter((function(t,a){var o=t.unlocked,n=t.goalObject.reward_type;return a!==e&&o&&"discount"===n})),previousIsUnlocked:i,show_all_locked_goals:a.show_all_locked_goals,isFirst:c,isLast:u})}))),s.default.createElement("div",{className:Object(f.a)("flex w-full relative mix-blend-darken",a.progress_thick?"h-4 rounded-4":"h-2 rounded-2"),style:{background:C.formatColor(a.progress_secondary)}},s.default.createElement("div",{className:Object(f.a)("block transition-width absolute inset-0 duration-500 ease-out z-10",a.progress_thick?"h-4 rounded-4":"h-2 rounded-2"),style:{background:W.goals.filter((function(t){return!t.unlocked})).length>0?C.formatColor(a.progress_primary):C.formatColor(a.progress_complete),width:"".concat(W.goals.reduce((function(t,e){e.unlocked;var a=e.isFirst,o=e.previousIsUnlocked,n=e.value;return a||o?t+n:t}),0)/W.goals.length,"%")}}),W.goals.map((function(t,e){var o=t.key,n=t.goalObject,r=t.isFirst,l=t.isLast,i=t.unlocked;return s.default.createElement(H,{key:o,add_to_unlock:a,unlocked:i,goal:n,goals:W.goals,isFirst:r,isLast:l,borderColor:"#718096"})}))),s.default.createElement("div",{className:Object(f.a)("flex justify-between text-gray-600 relative h-3")},W.goals.map((function(t,e){var o=t.labelKey,n=t.goalObject,r=t.isLast,l=n.goal_text;n.badge,n.reward_type;return!n.show_goal_text||a.show_badges?null:s.default.createElement("div",{key:o,className:Object(f.a)("absolute transform w-max text-center"),style:{left:!i&&"".concat((e+1)/W.goals.length*100,"%"),right:i&&"".concat((e+1)/W.goals.length*100,"%"),width:X?"".concat(100/W.goals.length,"%"):"fit-content",whiteSpace:"nowrap",fontSize:C.em(l.font_size),color:C.formatColor(l.color),"--transform-translate-x":"".concat(X?100*(i?1:-1):(r?100:50)*(i?1:-1),"%")}},l.text)}))))}var H=function(t){var e,a,o,n,r,l=t.isFirst,u=t.isLast,g=t.borderColor,p=t.goal,m=t.goals,C=t.unlocked,v=t.add_to_unlock,h=Object(s.useContext)(d.CartContext),_=h.cart_settings,b=_.theme.background,w=_.rtl,y=_.money_format,x=h.Utils,j=(p.reward_type,p.badge),H=null==j||null===(e=j.text)||void 0===e?void 0:e.text.replace("{{goal}}","quantity"===v.multi_goal_type?p.goal:x.formatMoney(100*p.goal,y)),k=1===(null==j?void 0:j.type)&&(null==j?void 0:j.image),L=v.progress_thick?w?"rounded-r-4":"rounded-l-4":w?"rounded-r-2":"rounded-l-2",E=v.progress_thick?w?"rounded-l-4":"rounded-r-4":w?"rounded-l-2":"rounded-r-2",M=m.length,N=0===m.filter((function(t){return!t.unlocked})).length;return s.default.createElement("div",{className:Object(f.a)("relative flex-1 bg-transparent z-20 mix-blend-overlay",v.progress_thick?"h-4":"h-2",(a={},Object(c.a)(a,L,l),Object(c.a)(a,E,u),Object(c.a)(a,"border-r",!v.show_badges&&!w&&!u),Object(c.a)(a,"border-l",!v.show_badges&&w&&!u),a)),style:{borderColor:g,display:"block"}},!!v.show_badges&&j&&s.default.createElement("div",{className:Object(f.a)("z-20 w-55px h-55px rounded-full border-3 absolute top-1/2 transform text-12px font-bold leading-tight"),style:Object(i.a)(Object(i.a)({},(r=M>2?"50%":1===M?"80%":l?"85%":"70%",Object(c.a)({},w?"right":"left",r))),{},{background:x.formatColor(b),color:x.formatColor(v.progress_primary),"--transform-translate-y":"-50%","--transform-translate-x":2===M&&l?0:"-50%",borderColor:x.formatColor(C?N?v.progress_complete:v.progress_primary:v.progress_secondary)})},s.default.createElement("div",{style:{backgroundImage:k?"url(".concat(null==j?void 0:j.image,")"):void 0},className:Object(f.a)("relative bg-cover bg-center flex items-center justify-center flex-col w-full h-full rounded-full")},!k&&s.default.createElement(O,{goal:p}),s.default.createElement("span",{className:Object(f.a)("absolute w-full text-center",{hidden:!0!==j.show_text}),style:{bottom:"-19px",fontSize:x.em(null==j||null===(o=j.text)||void 0===o?void 0:o.font_size),color:x.formatColor(null==j||null===(n=j.text)||void 0===n?void 0:n.color)},dangerouslySetInnerHTML:{__html:H}}))))},k=function(t){var e,a,o=t.currentGoal,n=t.add_to_unlock.multi_goal_type,r=t.unlocked,l=t.otherUnlockedDiscounts,i=t.previousIsUnlocked,c=t.show_all_locked_goals,u=t.bundlesDiscounts,g=t.filteredItems,p=t.isLast,m=t.isFirst,C=Object(s.useContext)(d.CartContext),v=C.cart_settings,h=v.font.color,_=v.money_format,b=C.Utils,w=C.get_total,y=C.discountCode,x=o.goal,O=o.reward_type,j=o[O],H=!!("discount"===O)&&!!l.find((function(t){return t.goalObject.discount.reward>j.reward})),k=r?j.after:j.before;return e=k,(a=document.createElement("span")).innerHTML=e,0!==a.innerText.length&&!H&&(c&&r||m&&!r||p&&r||!r&&i)?s.default.createElement("div",{className:Object(f.a)("emoji-image mb-1 text-center"),style:{color:h},dangerouslySetInnerHTML:{__html:L(k,O,j,(function(t){return b.formatMoney(t,_)}),w,x,n,g,u,y)}}):null},L=function(t,e,a,o,n,r,l,i,c,u){var s=a.type,d=a.reward,f="discount"===e?"percentage"===s?"".concat(d,"%"):o(100*d):"",g=parseInt(100*r),p=n(null,i),m=p.subtotal,C=p.original,v=o(g-("free_shipping"===e?m:C-c-((null==u?void 0:u.value)||0))),h=r-i.map((function(t){return t.quantity})).reduce((function(t,e){return t+e}),0);return t.replace("{{amount_left}}","quantity"===l?h:v).replace("{{reward}}",f).replace("{{goal}}",o(100*r))};function E(t){var e=t.AppLocalStorage,a=t.variants,o=t.key,n=e.getItem(o),r=function(){var t=Object(l.a)(a).sort((function(){return.5-Math.random()}))[0];return e.setItem(o,JSON.stringify({cached_at:Date.now(),variant:t})),t};if(n){var i=JSON.parse(n),c=i.cached_at,u=i.variant;return Date.now()-c>432e4?r():u}return r()}function M(t){return t.map((function(t){return t.variants})).flat()}function N(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"find";if(!["find","filter"].includes(a))throw new Error("type must be find or filter");return t[a]((function(t){return e(t,!0)}))}function A(){return(A=Object(r.a)(n.a.mark((function t(e){var a,o,r,l,u,s,d,f,g,p,m,C,v,h,_,b,w;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.giftGoals,o=e.AppLocalStorage,r=e.Utils,l=e.discountCode,u=e.productNotAddedToCart,s=e.onlyOneItemAddedToCart,d=e.productAddedToCart,f=e.setCartItems,g=a.reduce((function(t,e,n){var i=e.campaign_id,c=e.key,f=e.goalObject,g=f.gift,p=g.product,m=g.multi_gift_select,C=g.previous_gift,v=f.gift.products||[f.gift.product?{variants:[{id:f.gift.product.variant_id}]}:null].filter(Boolean),h="remove"===C&&n>0&&a[n-1],_=n<a.length-1&&a[n+1],b=null==v?void 0:v.length,w="random"===m,y=!(w||1===b&&r.productHasOneVariant(v[0])),x=M(v||[p?{variants:[{id:p.variant_id}]}:null].filter(Boolean)),O=!N(x,d)&&E({AppLocalStorage:o,variants:x,key:"multi_gifts_".concat(i,"_").concat(c)});window.location.origin;return x.forEach((function(a){var o=S({goal:e,variant:a,discountCode:l,productNotAddedToCart:u,onlyOneItemAddedToCart:s,productAddedToCart:d});if(o){if("add"===o&&v){if(h&&!y){var n=h.goalObject.gift;N(M(n.products||[n.product?{variants:[{id:n.product.variant_id}]}:null].filter(Boolean)),d,"filter").forEach((function(e){t.remove.push({id:e.id})}))}if(_&&_.unlocked&&"remove"===_.goalObject.gift.previous_gift&&x.find((function(t){return t.id===a.id})))return;if(y||w&&a.id!==O.id)return}t[o].push({id:a.id})}})),t}),{add:[],remove:[]}),p=g.add,m=g.remove,!p.length){t.next=9;break}return C=p.reduce((function(t,e){var a=e.id;return Object(i.a)(Object(i.a)({},t),{},Object(c.a)({},a,1))}),{}),t.next=6,x.a.post(r.getLangPath("cart/update.js"),{updates:C});case 6:v=t.sent,(null==(h=v.data)?void 0:h.items)&&f(h.items,h.cart_level_discount_applications);case 9:if(!m.length){t.next=16;break}return _=m.reduce((function(t,e){var a=e.id;return Object(i.a)(Object(i.a)({},t),{},Object(c.a)({},a,0))}),{}),t.next=13,x.a.post(r.getLangPath("cart/update.js"),{updates:_});case 13:b=t.sent,(null==(w=b.data)?void 0:w.items)&&f(w.items,w.cart_level_discount_applications);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){var e=t.goal,a=t.variant,o=(t.discountCode,t.productNotAddedToCart),n=t.onlyOneItemAddedToCart,r=t.productAddedToCart,l=e.unlocked;if(a)return!l||!o(a,!0)&&n(a,!0)?!l&&r(a,!0)?"remove":null:"add"}}}]);